<head>
      <link rel="stylesheet" type="text/css" href="static/css/style.css">
      <title>Homepage</title>
    </head>
    <body>
      <div class="header">

      </div>

      <div class="title">
        <h1>Your User Homepage:</h1>
      </div>

      <a href = "/shop">
        <div class="shop btn">
          <h2 >Shop</h2>
        </div>
      </a>

      <div class="products">
        <p> Your products on the market</p>
        <br>
        <form action = "/sell" method = "POST">
          <input type = "submit" name = "sell" value = "Add Item">
        </form>
        <form action = "/home" method = "POST" id="delete"></form>

        <table class="table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Price (USD)</th>
              <th>Quantity</th>
              <th>Update</th>
              <th> <input class="btn" type="submit" value="Delete" name="delete" form="delete"> </th>
            </tr>
          </thead>

          <tbody>
            {% for prod in template_data['template_data'] %}
            <tr>
            {% if prod[4] == True %}
            <form action="/home" method = "POST" id="update_row">
              <td> <input type="text" name="name" value="{{ prod[0] }}"> </td>
              <td> <input type="text" name="price" value="{{ prod[1] }}"> </td>
              <td> <input type="text" name="quantity" value="{{ prod[2] }}"> </td>
              <input type="hidden" name = "pid" value = "{{ prod[3] }}">
              <td> <input type="submit" name="submit" value="Submit"> </td>
            </form>
            <td> <input type="checkbox" name="{{ prod[3] }}" form="delete"> </td>
            {% else %}
            <td>{{ prod[0] }} </td>
            <td>{{ prod[1] }} </td>
            <td>{{ prod[2] }} </td>
            <td>
              <form action="/home" method="post">
                <button name="update" value="{{ prod[3] }}" id="{{ prod[3] }}">Update</button>
              </form>
            </td>
            <td> <input type="checkbox" name="check" value = "{{ prod[3] }}"form="delete"> </td>
            {% endif %}

            {% endfor %}
            </tr>
          </tbody>
        </table>
      </div>
      <p>Andrew Szabo is a bitch</p><br><br>
      <p>Recent purchases:</p>
      {% if template_data["trasactions"] %}
      <table class="table">
        <thead>
          <tr>
            <th>Name</th>
            <th>Price per unit</th>
            <th>Quantity</th>
            <th>Total Price</th>
            <th>Time</th>
            <th>Delete</th>
          </tr>
        </thead>

        <tbody>
          {% for trans in template_data["trasactions"] %}
          <tr>
          <td>{{ trans[1] }} </td>
          <td>{{ trans[2] }} </td>
          <td>{{ trans[3] }} </td>
          <td>{{ trans[4] }} </td>
          <td>{{ trans[5] }} </td>
          <td>
            <form action="/home" method="POST">
              <button name="delete_recent" value="{{ trans[0] }}" id="{{ trans[0] }}">Delete</button>
            </form>
          </td>

          {% endfor %} <!-- iterating through recent trasactions -->
          <p>Note: Only transactions within the last 30 minutes are able to be deleted</p>
          {% else %} <!-- if there are no recent transactions  -->
          <p>No transactions in last 24 hours</p>
          {% endif %}

          </tr>
        </tbody>
      </table>
        <br><br>
        <p>Your stats:</p>
        <p>Number of buying transactions:  {{template_data["aggregate_data"][0]}} </p>
        <p>Number of items bought:  {{template_data["aggregate_data"][1]}} </p>
        <p>Value of items bought:  ${{template_data["aggregate_data"][2]}} </p>
        <br>
        <p>Number of selling transactions:  {{template_data["aggregate_data"][3]}} </p>
        <p>Number of items sold:  {{template_data["aggregate_data"][4]}} </p>
        <p>Value of items sold:  ${{template_data["aggregate_data"][5]}} </p>

        <br>
        <br>
        <br>
    </body>
</html>
